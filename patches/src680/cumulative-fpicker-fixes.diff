--- svtools/prj/d.lst	2005-02-02 19:31:35.000000000 +0530
+++ svtools/prj/d.lst	2005-02-24 20:53:25.000000000 +0530
@@ -272,6 +272,7 @@ hedabu: ..\inc\custritm.hxx %_DEST%\inc%
 hedabu: ..\inc\sfxecode.hxx %_DEST%\inc%_EXT%\svtools\sfxecode.hxx
 hedabu: ..\inc\ehdl.hxx %_DEST%\inc%_EXT%\svtools\ehdl.hxx
 hedabu: ..\inc\svtools.hrc %_DEST%\inc%_EXT%\svtools\svtools.hrc
+hedabu: ..\source\dialogs\filedlg2.hrc %_DEST%\inc%_EXT%\svtools\filedlg2.hrc
 
 hedabu: ..\source\xmlfilt\attrlist.hxx %_DEST%\inc%_EXT%\svtools\attrlist.hxx
 hedabu: ..\source\xmlfilt\i18nmap.hxx %_DEST%\inc%_EXT%\svtools\i18nmap.hxx
--- fpicker/source/unx/gnome/resourceprovider.cxx	2005-03-16 14:22:14.425517000 +0530
+++ fpicker/source/unx/gnome/resourceprovider.cxx	2005-03-16 14:27:01.741176066 +0530
@@ -96,6 +96,7 @@
 #endif
 
 #include <svtools/svtools.hrc>
+#include <svtools/filedlg2.hrc>
 
 //------------------------------------------------------------
 // namespace directives
@@ -111,9 +112,6 @@ using namespace ::com::sun::star::ui::di
 
 #define RES_NAME svt
 
-#define FOLDERPICKER_TITLE            500
-#define FOLDER_PICKER_DEF_DESCRIPTION 501
-
 //------------------------------------------------------------
 // we have to translate control ids to resource ids 
 //------------------------------------------------------------
@@ -137,7 +135,11 @@ _Entry CtrlIdToResIdTable[] = {
     { LISTBOX_IMAGE_TEMPLATE_LABEL,             STR_SVT_FILEPICKER_IMAGE_TEMPLATE },
     { CHECKBOX_SELECTION,                       STR_SVT_FILEPICKER_SELECTION },
     { FOLDERPICKER_TITLE,                       STR_SVT_FOLDERPICKER_DEFAULT_TITLE },
-    { FOLDER_PICKER_DEF_DESCRIPTION,            STR_SVT_FOLDERPICKER_DEFAULT_DESCRIPTION }
+    { FOLDER_PICKER_DEF_DESCRIPTION,            STR_SVT_FOLDERPICKER_DEFAULT_DESCRIPTION },
+    { FILE_PICKER_TITLE_OPEN,                   STR_FILEDLG_OPEN },
+    { FILE_PICKER_TITLE_SAVE,                   STR_FILEDLG_SAVE },
+    { FILE_PICKER_FILE_TYPE,                    STR_FILEDLG_TYPE },
+    { FILE_PICKER_OVERWRITE,                    STR_SVT_ALREADYEXISTOVERWRITE }
 };
 
 const sal_Int32 SIZE_TABLE = sizeof( CtrlIdToResIdTable ) / sizeof( _Entry );
--- fpicker/source/unx/gnome/resourceprovider.hxx	2005-03-16 14:22:14.425517000 +0530
+++ fpicker/source/unx/gnome/resourceprovider.hxx	2005-03-16 14:27:01.741176066 +0530
@@ -79,6 +79,13 @@
 // deklarations
 //------------------------------------------------------------------------
 
+#define FOLDERPICKER_TITLE             500
+#define FOLDER_PICKER_DEF_DESCRIPTION  501
+#define FILE_PICKER_TITLE_OPEN         502
+#define FILE_PICKER_TITLE_SAVE         503
+#define FILE_PICKER_FILE_TYPE          504
+#define FILE_PICKER_OVERWRITE          505
+
 class CResourceProvider_Impl;
 
 class CResourceProvider
--- fpicker/source/unx/gnome/SalGtkFilePicker.cxx	2005-03-16 14:22:14.427516000 +0530
+++ fpicker/source/unx/gnome/SalGtkFilePicker.cxx	2005-03-16 14:27:01.779169553 +0530
@@ -170,6 +170,10 @@ SalGtkFilePicker::SalGtkFilePicker( cons
 		lang::XServiceInfo>( m_rbHelperMtx ),
 	m_xServiceMgr( xServiceMgr ),
 	m_aAsyncEventNotifier( rBHelper ),
+	m_pFilterComboBox( NULL ),
+	m_pFilterComboHBox( NULL ),
+	m_pFilterComboAlign( NULL ),
+	m_pFilterComboLabel( NULL ),
 	m_pVBox ( NULL ),
 	m_pFilterList( NULL ),
     bVersionWidthUnset( false ),
@@ -199,6 +203,135 @@ SalGtkFilePicker::SalGtkFilePicker( cons
 		m_pListLabels[i] = NULL;
 		mbListVisibility[i] = false;
     }
+
+	CResourceProvider aResProvider;
+	OUString aFilePickerTitle;
+ 
+	aFilePickerTitle = aResProvider.getResString( FILE_PICKER_TITLE_OPEN );
+	    
+	m_pDialog = gtk_file_chooser_dialog_new(
+			OUStringToOString( aFilePickerTitle, RTL_TEXTENCODING_UTF8 ).getStr(),
+			NULL,
+			GTK_FILE_CHOOSER_ACTION_OPEN,
+			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
+			GTK_STOCK_OPEN, GTK_RESPONSE_ACCEPT,
+			NULL );
+
+	gtk_dialog_set_default_response( GTK_DIALOG (m_pDialog), GTK_RESPONSE_ACCEPT );
+
+	gtk_file_chooser_set_local_only( GTK_FILE_CHOOSER( m_pDialog ), FALSE );
+
+	m_pVBox = gtk_vbox_new( FALSE, 0 );
+
+	OUString aLabel;
+
+	for( i = 0; i < TOGGLE_LAST; i++ )
+	{
+		m_pToggles[i] = gtk_check_button_new();
+
+#define LABEL_TOGGLE( elem ) \
+		case elem : \
+			aLabel = aResProvider.getResString( CHECKBOX_##elem ); \
+			setLabel( CHECKBOX_##elem, aLabel ); \
+			break
+
+  		switch( i ) {
+
+		LABEL_TOGGLE( AUTOEXTENSION );
+		LABEL_TOGGLE( PASSWORD );
+		LABEL_TOGGLE( FILTEROPTIONS );
+		LABEL_TOGGLE( READONLY );
+		LABEL_TOGGLE( LINK );
+		LABEL_TOGGLE( PREVIEW );
+		LABEL_TOGGLE( SELECTION );
+			default:
+				OSL_TRACE("Handle unknown control %d\n", i);
+				break;
+		}
+	       
+
+		gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pToggles[i], FALSE, TRUE, 0 );
+	}
+
+	for( i = 0; i < BUTTON_LAST; i++ )
+	{
+		m_pButtons[i] = gtk_button_new();
+
+#define LABEL_BUTTON( elem ) \
+		case elem : \
+			aLabel = aResProvider.getResString( PUSHBUTTON_##elem ); \
+			setLabel( PUSHBUTTON_##elem, aLabel ); \
+			break
+
+  		switch( i ) {
+
+		LABEL_BUTTON( PLAY );
+			default:
+				OSL_TRACE("Handle unknown control %d\n", i);
+				break;
+		}
+
+		gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pButtons[i], FALSE, TRUE, 0 );
+	}
+
+	for( i = 0; i < LIST_LAST; i++ )
+	{
+        m_pHBoxs[i] = gtk_hbox_new( FALSE, 0 );
+
+        m_pAligns[i] = gtk_alignment_new(0, 0, 0, 1);
+
+		m_pLists[i] = gtk_combo_box_new_text();
+
+		m_pListLabels[i] = gtk_label_new( "" );
+
+#define LABEL_LIST( elem ) \
+		case elem : \
+			aLabel = aResProvider.getResString( LISTBOX_##elem##_LABEL ); \
+			setLabel( LISTBOX_##elem##_LABEL, aLabel ); \
+			break
+
+  		switch( i ) 
+        {
+            LABEL_LIST( VERSION );
+            LABEL_LIST( TEMPLATE );
+            LABEL_LIST( IMAGE_TEMPLATE );
+			default:
+				OSL_TRACE("Handle unknown control %d\n", i);
+				break;
+		}
+
+        gtk_container_add( GTK_CONTAINER( m_pAligns[i]), m_pLists[i] );
+        gtk_box_pack_end( GTK_BOX( m_pHBoxs[i] ), m_pAligns[i], FALSE, FALSE, 0 );
+
+        gtk_box_pack_end( GTK_BOX( m_pHBoxs[i] ), m_pListLabels[i], FALSE, FALSE, 0 );
+
+        gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pHBoxs[i], FALSE, FALSE, 0 );
+	}
+
+	m_pFilterComboBox = gtk_combo_box_new_text();
+	m_pFilterComboAlign = gtk_alignment_new(0, 0, 0, 1);
+	m_pFilterComboHBox = gtk_hbox_new( FALSE, 0 );
+	m_pFilterComboLabel = gtk_label_new( "" );
+
+	aLabel = aResProvider.getResString( FILE_PICKER_FILE_TYPE );
+	aLabel += OUString::createFromAscii(": ");
+	g_object_set( m_pFilterComboLabel, "label",
+		OUStringToOString( aLabel, RTL_TEXTENCODING_UTF8 ).getStr(),
+		"use_underline", TRUE, NULL );
+
+	gtk_container_add( GTK_CONTAINER( m_pFilterComboAlign ), m_pFilterComboBox );
+	gtk_box_pack_end( GTK_BOX( m_pFilterComboHBox ), m_pFilterComboAlign, FALSE, FALSE, 0 );
+	gtk_box_pack_end( GTK_BOX( m_pFilterComboHBox ), m_pFilterComboLabel, FALSE, FALSE, 0 );
+	gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pFilterComboHBox, FALSE, FALSE, 0 );
+
+	gtk_widget_show( m_pFilterComboLabel );
+	gtk_widget_show( m_pFilterComboHBox );
+	gtk_widget_show( m_pFilterComboAlign );
+	gtk_widget_show( m_pFilterComboBox );
+
+	gtk_file_chooser_set_extra_widget( GTK_FILE_CHOOSER( m_pDialog ), m_pVBox );
+
+	gtk_widget_show( m_pVBox );
 }
 
 //------------------------------------------------------------------------------------
@@ -471,6 +604,20 @@ shrinkFilterName( const rtl::OUString &r
 	return aRealName;
 }
 
+static void
+dialog_remove_buttons( GtkDialog *pDialog )
+{
+	g_return_if_fail( GTK_IS_DIALOG( pDialog ) );
+
+	GList *pChildren =
+		gtk_container_get_children( GTK_CONTAINER( pDialog->action_area ) );
+
+	for( GList *p = pChildren; p; p = p->next )
+		gtk_widget_destroy( GTK_WIDGET( p->data ) );
+
+	g_list_free( pChildren );
+}
+
 //------------------------------------------------------------------------------------
 namespace {
 	//................................................................................
@@ -619,12 +766,46 @@ rtl::OUString SAL_CALL SalGtkFilePicker:
 
 	OSL_TRACE( "GetCURRENTfilter\n" );
 
+	GtkFileChooserAction eAction = gtk_file_chooser_get_action( GTK_FILE_CHOOSER( m_pDialog ) );
+
 	// Update the filtername from the users selection if they have had a chance to do so.
 	if( GtkFileFilter *filter = gtk_file_chooser_get_filter( GTK_FILE_CHOOSER( m_pDialog ) ) )
 	{
 		const gchar* filtername = gtk_file_filter_get_name( filter );
 		m_aCurrentFilter = rtl::OUString( filtername, strlen( filtername ), 
 							RTL_TEXTENCODING_UTF8 );
+		gint nFilterPos = 0;
+		for(	FilterList::iterator aListIter = m_pFilterList->begin();
+				aListIter != m_pFilterList->end();
+				++aListIter, ++nFilterPos
+			)
+		{
+			if ( aListIter->getTitle().indexOf( m_aCurrentFilter ) == 0 )
+   			{
+				m_aCurrentFilter = OUString( aListIter->getTitle() );
+				break;
+			}
+		}
+	}
+
+	if( GTK_FILE_CHOOSER_ACTION_SAVE == eAction ||
+		( GTK_FILE_CHOOSER_ACTION_OPEN == eAction && 
+		  m_aCurrentFilter.equals( m_pFilterList->begin()->getTitle() ) ) )
+	{
+		gint nFilterChoice = gtk_combo_box_get_active( GTK_COMBO_BOX( m_pFilterComboBox ) );
+
+		gint nFilterPos = 0;
+		for     (       FilterList::iterator aListIter = m_pFilterList->begin();
+				aListIter != m_pFilterList->end();
+				++aListIter, ++nFilterPos
+			)
+		{
+			if ( nFilterPos == nFilterChoice )
+			{
+				m_aCurrentFilter = OUString( aListIter->getTitle() );
+				break;
+			}
+		}
 	}
 
 	OSL_TRACE( "Returning current filter of %s\n", 
@@ -751,18 +932,22 @@ uno::Sequence<rtl::OUString> SAL_CALL Sa
 
 		if( GTK_FILE_CHOOSER_ACTION_SAVE == eAction )
 		{
-			const gchar* filtername = 
-				gtk_file_filter_get_name( gtk_file_chooser_get_filter( GTK_FILE_CHOOSER( m_pDialog ) ) );
-
-			OSL_TRACE( "2: current filter is %s\n", filtername );
+			OUString aFilter;
 
+			gint nFilterChoice = gtk_combo_box_get_active( GTK_COMBO_BOX( m_pFilterComboBox ) );
 
-			FilterList::iterator aListIter = ::std::find_if( 
-			       			m_pFilterList->begin(), m_pFilterList->end(), 
-						FilterTitleMatch( OUString( filtername,
-							strlen( filtername ), RTL_TEXTENCODING_UTF8 ) ) );
-
-			OUString aFilter = aListIter->getFilter();
+               		gint nFilterPos = 0;
+		        for     (       FilterList::iterator aListIter = m_pFilterList->begin();
+					aListIter != m_pFilterList->end();
+					++aListIter, ++nFilterPos
+				)
+			{
+				if ( nFilterPos == nFilterChoice )
+				{
+					aFilter = OUString( aListIter->getFilter() );
+					break;
+				}
+			}
 
 			OSL_TRACE( "turned into %s\n", 
 				OUStringToOString( aFilter, RTL_TEXTENCODING_UTF8 ).getStr() );
@@ -862,15 +1047,20 @@ sal_Int16 SAL_CALL SalGtkFilePicker::exe
 						OString sFileName = rtl::OUStringToOString( aPathSeq[0], RTL_TEXTENCODING_UTF8 );
 						if( g_file_test( g_filename_from_uri( sFileName.getStr(), NULL, NULL ), G_FILE_TEST_IS_REGULAR ) )
 						{
+							CResourceProvider aResProvider;
 							GtkWidget *dlg;
 			
 							dlg = gtk_message_dialog_new( GTK_WINDOW( m_pDialog ), GTK_DIALOG_MODAL,
 								GTK_MESSAGE_QUESTION,
 								GTK_BUTTONS_YES_NO,
-								"The file already exists. Overwrite?" );
-
-							gtk_window_set_title( GTK_WINDOW( dlg ), "Overwrite file?" );
-							gtk_dialog_set_has_separator( GTK_DIALOG( dlg ), FALSE );
+								OUStringToOString( 
+									aResProvider.getResString( FILE_PICKER_OVERWRITE ),
+									RTL_TEXTENCODING_UTF8 ).getStr() );
+
+							gtk_window_set_title( GTK_WINDOW( dlg ),
+								OUStringToOString( 
+									aResProvider.getResString( FILE_PICKER_TITLE_SAVE ),
+									RTL_TEXTENCODING_UTF8 ).getStr() );
 
 							btn = gtk_dialog_run( GTK_DIALOG( dlg ) );
 							gtk_widget_destroy( dlg );
@@ -1495,108 +1685,23 @@ void SAL_CALL SalGtkFilePicker::initiali
 				1 );
 	}
 
-	CResourceProvider aResProvider;
-	OUString aLabel;
-
-	m_pDialog = gtk_file_chooser_dialog_new( "File Selection", NULL, 
-			eAction,
-			GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL,
-			first_button_text, GTK_RESPONSE_ACCEPT,
-			NULL );
-
-	gtk_dialog_set_default_response( GTK_DIALOG (m_pDialog), GTK_RESPONSE_ACCEPT );
-
-	gtk_file_chooser_set_local_only( GTK_FILE_CHOOSER( m_pDialog ), FALSE );
-	gtk_file_chooser_set_select_multiple( GTK_FILE_CHOOSER( m_pDialog ), FALSE );
-
-	m_pVBox = gtk_vbox_new( FALSE, 0 );
-
-        int i;
-
-	for( i = 0; i < TOGGLE_LAST; i++ )
+	if( GTK_FILE_CHOOSER_ACTION_SAVE == eAction )
 	{
-		m_pToggles[i] = gtk_check_button_new();
-
-#define LABEL_TOGGLE( elem ) \
-		case elem : \
-			aLabel = aResProvider.getResString( CHECKBOX_##elem ); \
-			setLabel( CHECKBOX_##elem, aLabel ); \
-			break
-
-  		switch( i ) {
-
-		LABEL_TOGGLE( AUTOEXTENSION );
-		LABEL_TOGGLE( PASSWORD );
-		LABEL_TOGGLE( FILTEROPTIONS );
-		LABEL_TOGGLE( READONLY );
-		LABEL_TOGGLE( LINK );
-		LABEL_TOGGLE( PREVIEW );
-		LABEL_TOGGLE( SELECTION );
-			default:
-				OSL_TRACE("Handle unknown control %d\n", i);
-				break;
-		}
-	       
-
-		gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pToggles[i], FALSE, TRUE, 0 );
+		CResourceProvider aResProvider;
+		OUString aFilePickerTitle;
+ 
+		aFilePickerTitle = aResProvider.getResString( FILE_PICKER_TITLE_SAVE );
+		gtk_window_set_title ( GTK_WINDOW( m_pDialog ),
+			OUStringToOString( aFilePickerTitle, RTL_TEXTENCODING_UTF8 ).getStr() );
 	}
 
-	for( i = 0; i < BUTTON_LAST; i++ )
-	{
-		m_pButtons[i] = gtk_button_new();
-
-#define LABEL_BUTTON( elem ) \
-		case elem : \
-			aLabel = aResProvider.getResString( PUSHBUTTON_##elem ); \
-			setLabel( PUSHBUTTON_##elem, aLabel ); \
-			break
-
-  		switch( i ) {
+	gtk_file_chooser_set_action( GTK_FILE_CHOOSER( m_pDialog ), eAction);
+
+	dialog_remove_buttons( GTK_DIALOG( m_pDialog ) );
+	gtk_dialog_add_button( GTK_DIALOG( m_pDialog ), GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL );
+	gtk_dialog_add_button( GTK_DIALOG( m_pDialog ), first_button_text, GTK_RESPONSE_ACCEPT );
 
-		LABEL_BUTTON( PLAY );
-			default:
-				OSL_TRACE("Handle unknown control %d\n", i);
-				break;
-		}
-
-		gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pButtons[i], FALSE, TRUE, 0 );
-	}
-
-	for( i = 0; i < LIST_LAST; i++ )
-	{
-        m_pHBoxs[i] = gtk_hbox_new( FALSE, 0 );
-
-        m_pAligns[i] = gtk_alignment_new(0, 0, 0, 1);
-
-		m_pLists[i] = gtk_combo_box_new_text();
-
-		m_pListLabels[i] = gtk_label_new( "" );
-
-#define LABEL_LIST( elem ) \
-		case elem : \
-			aLabel = aResProvider.getResString( LISTBOX_##elem##_LABEL ); \
-			setLabel( LISTBOX_##elem##_LABEL, aLabel ); \
-			break
-
-  		switch( i ) 
-        {
-            LABEL_LIST( VERSION );
-            LABEL_LIST( TEMPLATE );
-            LABEL_LIST( IMAGE_TEMPLATE );
-			default:
-				OSL_TRACE("Handle unknown control %d\n", i);
-				break;
-		}
-
-        gtk_container_add( GTK_CONTAINER( m_pAligns[i]), m_pLists[i] );
-        gtk_box_pack_end( GTK_BOX( m_pHBoxs[i] ), m_pAligns[i], FALSE, FALSE, 0 );
-
-        gtk_box_pack_end( GTK_BOX( m_pHBoxs[i] ), m_pListLabels[i], FALSE, FALSE, 0 );
-
-        gtk_box_pack_end( GTK_BOX( m_pVBox ), m_pHBoxs[i], FALSE, FALSE, 0 );
-	}
-
-	gtk_file_chooser_set_extra_widget( GTK_FILE_CHOOSER( m_pDialog ), m_pVBox );
+	gtk_dialog_set_default_response( GTK_DIALOG (m_pDialog), GTK_RESPONSE_ACCEPT );
 
 	// Setup special flags
 	for( int nTVIndex = 0; nTVIndex < TOGGLE_LAST; nTVIndex++ )
@@ -1617,8 +1722,6 @@ void SAL_CALL SalGtkFilePicker::initiali
         }
 	}
 
-	gtk_widget_show( m_pVBox );
-
 	// if Preview check is visible, connect the signal handler
 	if( mbToggleVisibility[PREVIEW] )
 		gtk_signal_connect( GTK_OBJECT( m_pToggles[PREVIEW] ), "toggled",
@@ -1688,33 +1791,38 @@ uno::Sequence<rtl::OUString> SAL_CALL Sa
 //-------------------------------------------------
 void SalGtkFilePicker::SetCurFilter( const OUString& rFilter )
 {
+	OUString aShrunkName = shrinkFilterName( rFilter );
+
+	gint nFilterPos = 0;
+	for     (       FilterList::iterator aListIter = m_pFilterList->begin();
+			aListIter != m_pFilterList->end();
+			++aListIter, ++nFilterPos
+		)
+	{
+		if ( aShrunkName.equals( aListIter->getTitle() ) )
+		{
+			gtk_combo_box_set_active( GTK_COMBO_BOX( m_pFilterComboBox ), nFilterPos );
+			break;
+		}
+	}
+
 	// Get all the filters already added
 	GSList *filters = gtk_file_chooser_list_filters ( GTK_FILE_CHOOSER( m_pDialog ) );
 	bool bFound = false;
 
-	while( ( !bFound ) && ( NULL != filters ) )
+	for( GSList *iter = filters; !bFound && iter; iter = iter->next )
 	{
-		GtkFileFilter* pFilter = reinterpret_cast<GtkFileFilter *>( filters->data );
+		GtkFileFilter* pFilter = reinterpret_cast<GtkFileFilter *>( iter->data );
 		G_CONST_RETURN gchar * filtername = gtk_file_filter_get_name( pFilter );
 		OUString sFilterName( filtername, strlen( filtername ), RTL_TEXTENCODING_UTF8 );
 
-		OUString aShrunkName = shrinkFilterName( rFilter );
 		if( aShrunkName.equals( sFilterName) )
 		{
 			OSL_TRACE( "actually setting %s\n", filtername );
 			gtk_file_chooser_set_filter( GTK_FILE_CHOOSER( m_pDialog ), pFilter );
 			bFound = true;
 		}
-
-		// Free the node
-		g_object_ref( pFilter ); 
-		gtk_object_sink( GTK_OBJECT( pFilter ) );
-		g_object_unref( pFilter );
-
-		//    g_free(filters->data); 
-		filters = g_slist_next( filters );
 	}
-
 	g_slist_free( filters );
 }
 
@@ -1783,6 +1891,8 @@ void SalGtkFilePicker::implAddFilter( co
 		while( nIndex >= 0 );
 	}
 
+	gtk_combo_box_append_text( GTK_COMBO_BOX( m_pFilterComboBox ), aFilterName );
+
 	gtk_file_chooser_add_filter( GTK_FILE_CHOOSER( m_pDialog ), filter );
 }
 
@@ -1824,6 +1934,7 @@ void SalGtkFilePicker::SetFilters()
 		}
 	}
 
+	gtk_combo_box_set_active( GTK_COMBO_BOX( m_pFilterComboBox ), 0 );
 
 	// set the default filter
 	if( m_aCurrentFilter && (m_aCurrentFilter.getLength() > 0) )
@@ -1856,6 +1967,11 @@ SalGtkFilePicker::~SalGtkFilePicker()
 
 	delete m_pFilterList;
 
+	gtk_widget_destroy( m_pFilterComboBox );
+	gtk_widget_destroy( m_pFilterComboAlign );
+	gtk_widget_destroy( m_pFilterComboLabel );
+	gtk_widget_destroy( m_pFilterComboHBox );
+
 	gtk_widget_destroy( m_pVBox );
 }
 
--- fpicker/source/unx/gnome/SalGtkFilePicker.hxx	2005-03-16 14:22:14.427516000 +0530
+++ fpicker/source/unx/gnome/SalGtkFilePicker.hxx	2005-03-16 14:27:01.744175552 +0530
@@ -324,6 +324,10 @@ class SalGtkFilePicker : 
 		SalGtkAsyncEventNotifier m_aAsyncEventNotifier;
 		FilterList *m_pFilterList;
 		GtkWidget  *m_pVBox;
+		GtkWidget  *m_pFilterComboBox;
+		GtkWidget  *m_pFilterComboLabel;
+		GtkWidget  *m_pFilterComboHBox;
+		GtkWidget  *m_pFilterComboAlign;
 
 		enum { 
 			AUTOEXTENSION,
--- fpicker/source/unx/gnome/SalGtkFolderPicker.cxx	2005-03-16 14:22:14.428516000 +0530
+++ fpicker/source/unx/gnome/SalGtkFolderPicker.cxx	2005-03-16 14:27:01.744175552 +0530
@@ -147,8 +147,10 @@ namespace
 SalGtkFolderPicker::SalGtkFolderPicker( const uno::Reference<lang::XMultiServiceFactory>& xServiceMgr ) : 
 	m_xServiceMgr( xServiceMgr )
 {
-	m_pDialog = gtk_file_chooser_dialog_new( "Folder Selection", NULL, 
-		GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, 
+	CResourceProvider aResProvider;
+	m_pDialog = gtk_file_chooser_dialog_new(
+		OUStringToOString( aResProvider.getResString( FOLDERPICKER_TITLE ), RTL_TEXTENCODING_UTF8 ).getStr(),
+		NULL, GTK_FILE_CHOOSER_ACTION_SELECT_FOLDER, GTK_STOCK_CANCEL, GTK_RESPONSE_CANCEL, 
 		GTK_STOCK_OK, GTK_RESPONSE_ACCEPT, NULL );
 
 	gtk_dialog_set_default_response( GTK_DIALOG (m_pDialog), GTK_RESPONSE_ACCEPT );
