--- solenv/bin/modules/installer/worker.pm.orig	2007-03-01 16:16:03.000000000 +0100
+++ solenv/bin/modules/installer/worker.pm	2007-06-26 14:19:55.000000000 +0200
@@ -36,6 +36,8 @@
 package installer::worker;
 
 use Cwd;
+use File::Copy;
+use File::stat;
 use File::Temp qw(tmpnam);
 use installer::control;
 use installer::converter;
@@ -787,12 +789,14 @@ sub install_simple ($$$$$)
 		$destination =~ s/\$\$/\$/;
 		$sourcepath =~ s/\$\$/\$/;
 
-		# printf "mv $sourcepath $destdir$destination\n";
-		`$gnucp $copyopts '$sourcepath' '$destdir$destination'`;
-		`chmod $unixrights '$destdir$destination'`;
+		# printf "cp $sourcepath $destdir$destination\n";
+		copy ("$sourcepath", "$destdir$destination") || die "Can't copy file: $!";
+		my $sourcestat = stat($sourcepath);
+		utime ($sourcestat->atime, $sourcestat->mtime, "$destdir$destination");
+		chmod (oct($unixrights), "$destdir$destination") || die "Can't change permissions: $!";
 		push @lines, "$destination\n";
 	}
-	
+
 	for ( my $i = 0; $i <= $#{$linksarray}; $i++ )
 	{
 		my $onelink = ${$linksarray}[$i];
@@ -800,7 +804,7 @@ sub install_simple ($$$$$)
 		my $destinationfile = $onelink->{'destinationfile'};
 	
 		# print "link $destinationfile -> $destdir$destination\n";
-		`ln -sf '$destinationfile' '$destdir$destination'`;
+		symlink ("$destinationfile", "$destdir$destination") || die "Can't create symlink: $!";
 		push @lines, "$destination\n";
 	}
 
