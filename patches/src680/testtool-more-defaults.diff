Index: automation/source/testtool/objtest.cxx
===================================================================
RCS file: /cvs/util/automation/source/testtool/objtest.cxx,v
retrieving revision 1.20
diff -u -p -r1.20 objtest.cxx
--- automation/source/testtool/objtest.cxx	6 Oct 2005 12:37:43 -0000	1.20
+++ automation/source/testtool/objtest.cxx	27 Feb 2006 20:26:19 -0000
@@ -516,6 +516,52 @@ void TestToolObj::LoadIniFile()				// La
     abGP.Append( "03" );  // Linux
 #endif
     GETSET( aGP, "Current", abGP );
+
+    aConf.SetGroup("Crashreporter");
+
+    String aUP;
+    GETSET( aUP, "UseProxy", "false" );
+    String aPS;
+    GETSET( aPS, "ProxyServer", "" );
+    String aPP;
+    GETSET( aPP, "ProxyPort", "" );
+    String aAC;
+    GETSET( aAC, "AllowContact", "false" );
+    String aRA;
+    GETSET( aRA, "ReturnAddress", "" );
+
+    OUString sPath;
+    if( osl_getExecutableFile( (rtl_uString**)&sPath ) == osl_Process_E_None)
+    {
+        sPath = sPath.copy(7); // strip file://
+
+        int i = sPath.lastIndexOf('/');
+        if (i >= 0)
+            i = sPath.lastIndexOf('/', i-1 );
+
+        if (i >= 0)
+        {
+            sPath = sPath.copy(0, i);
+            ByteString bsPath( sPath.getStr(), sPath.getLength(),
+                               RTL_TEXTENCODING_UTF8 );
+            
+            aConf.SetGroup( "OOoProgramDir" );
+            String aOPD;
+            GETSET( aOPD, "Current", bsPath);
+
+            aConf.SetGroup( "Path" );
+            String aPBD;
+            bsPath += "/qatesttool";
+            GETSET( aPBD, "BaseDir", bsPath );
+
+            String aPHD;
+            bsPath += "/global/hid";
+            GETSET( aPHD, "HIDDir", bsPath );
+
+            String aLD;
+            GETSET( aLD, "LogBaseDir", ByteString( "/tmp" ) );
+        }
+    }
 }
 
 #define MAKE_TT_KEYWORD( cName, aType, aResultType, nID ) \
